# UC-2.10 AI日記內容分析

| 項目 | 內容 |
|------|------|
| **填表人** | 李芝瑢 |
| **商業流程編號** | UC-2.10 |
| **行為者** | 會員、系統 |
| **內容概述** | 使用者可主動觸發或系統自動對日記內容進行 AI 分析,提取情緒分數、關鍵字、情感傾向與摘要,幫助使用者了解內心狀態與日記主題。 |
| **先決條件** | 使用者已登入且日記內容存在(非空白)。 |
| **後置條件** | 系統產生 AI 分析結果並儲存至 ai_analysis 資料表,使用者可查看分析報告。 |
| **主要流程** | 1. 使用者在日記詳情頁點擊「AI 分析」按鈕,或系統在日記發布時自動觸發分析。<br>2. 系統將日記內容(content)發送至 AI 服務 API(如 OpenAI GPT-4、Google Gemini 或本地 NLP 模型)。<br>3. AI 引擎分析文字並返回:<br>&nbsp;&nbsp;&nbsp;- emotion_score (JSON):各情緒分數,如 {"joy": 0.7, "sadness": 0.2, "anger": 0.1}<br>&nbsp;&nbsp;&nbsp;- keywords (JSON):關鍵字陣列,如 ["工作", "壓力", "放鬆"]<br>&nbsp;&nbsp;&nbsp;- sentiment (ENUM):情感傾向(positive/neutral/negative)<br>&nbsp;&nbsp;&nbsp;- summary (TEXT):AI 生成的摘要(100-200 字)<br>4. 系統將分析結果儲存至 ai_analysis 表(一對一關聯 diary_id)。<br>5. 系統顯示分析結果頁面,包含情緒雷達圖、關鍵字雲、情感指標與摘要。 |
| **替代流程** | a. 若 AI 服務 API 呼叫失敗  系統顯示「分析服務暫時無法使用,請稍後再試」,並記錄錯誤日誌。<br>b. 若日記內容過短(少於 20 字)  系統提示「內容過短,無法進行有效分析」。<br>c. 若已有分析結果  顯示「重新分析」選項,點擊後覆蓋舊結果。<br>d. 若 API 超時(>30 秒)  顯示載入中狀態,並在背景繼續處理,完成後發送通知。 |
| **輔助說明** | 建議使用自然語言處理模型(如 OpenAI GPT-4 API、Google Cloud Natural Language API 或開源 BERT 模型)。分析結果可用於月度回顧、情緒趨勢圖表等進階功能。考慮 API 成本,可限制每日分析次數或僅對 VIP 用戶開放。analyzed_at 記錄分析時間戳。 |
| **Screen 畫面** | 日記詳情頁、AI 分析結果頁 |

---

[ 回到索引](../README.md)
