# UC-2.1 新增日記資料

| 項目 | 內容 |
|------|------|
| **填表人** | 李芝瑢 |
| **商業流程編號** | UC-2.1 |
| **行為者** | 會員 |
| **內容概述** | 使用者可於「新增日記」頁面撰寫內容、上傳圖片、設定情緒與天氣標籤,完成後儲存為個人日記。 |
| **先決條件** | 使用者已登入帳號。 |
| **後置條件** | 系統成功儲存一筆新的日記資料,並顯示於「我的日記」列表。 |
| **主要流程** | 1. 使用者點擊「新增日記」。<br>2. 系統顯示日記編輯介面。<br>3. 使用者輸入文字內容(上限 10,000 字),可上傳圖片/檔案(單檔最大 5MB,最多 9 個)。<br>4. 使用者可選擇情緒標籤、天氣標籤與關鍵字標籤。<br>5. 使用者設定可見性(私人/公開)。<br>6. 使用者點擊「儲存」或「發布」。<br>7. 系統將日記資料存入 diaries 資料表,狀態為「草稿」或「已發布」,並記錄標籤至 diary_tags 表。 |
| **替代流程** | a. 若網路中斷  系統顯示離線提示,內容自動暫存於瀏覽器本地儲存(localStorage),待網路恢復後提示使用者繼續編輯。<br>b. 若上傳檔案格式不支援或單檔超過 5MB  顯示警告訊息「檔案過大或格式不支援」並中止該檔案上傳,允許繼續上傳其他檔案。<br>c. 若上傳檔案數量超過 9 個  顯示「最多只能上傳 9 個檔案」提示並阻止繼續上傳。<br>d. 若日記內容超過 10,000 字  顯示字數限制警告並禁止儲存,提示使用者刪減內容。 |
| **輔助說明** | 系統自動記錄建立時間(created_at)與使用者 ID(user_id)。支援 Markdown 或富文字編輯器。建議實作自動儲存草稿功能(每 30 秒或內容變更時)。圖片支援格式:JPG, PNG, GIF, WEBP。 |
| **Screen 畫面** | 新增日記頁 |

---

[ 回到索引](../README.md)
