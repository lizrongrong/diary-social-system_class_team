# UC-2.9 日記天氣標籤設定

| 項目 | 內容 |
|------|------|
| **填表人** | 李芝瑢 |
| **商業流程編號** | UC-2.9 |
| **行為者** | 會員 |
| **內容概述** | 使用者在新增或編輯日記時,可選擇當日天氣標籤(如晴天、雨天、陰天等),記錄環境氛圍,增強日記情境感。此功能為 UC-2.1 與 UC-2.2 的子流程。 |
| **先決條件** | 使用者已登入帳號,正在新增或編輯日記。 |
| **後置條件** | 天氣標籤記錄至 diary_tags 資料表(tag_type = 'weather'),可於日記列表顯示天氣圖示。 |
| **主要流程** | 1. 使用者在日記編輯介面的「天氣」區域點擊天氣選擇器。<br>2. 系統顯示預設天氣標籤列表(從 weather_tags 表讀取),每個標籤包含名稱與圖示(如「晴天 ☀️」、「雨天 🌧️」)。<br>3. 使用者選擇一個天氣標籤(單選)。<br>4. 系統即時顯示已選天氣圖示,使用者可重新選擇或清除。<br>5. 使用者儲存或發布日記時,系統將天氣標籤插入 diary_tags 表:<br>&nbsp;&nbsp;&nbsp;- tag_type = 'weather'<br>&nbsp;&nbsp;&nbsp;- tag_value = 天氣名稱(如「晴天」、「雨天」)<br>&nbsp;&nbsp;&nbsp;- diary_id = 當前日記 ID |
| **替代流程** | a. 若使用者未設定天氣  系統不儲存 weather 標籤,日記列表顯示「無天氣資料」或空白。<br>b. 若系統整合氣象 API  可自動根據使用者所在地與當前時間,推薦天氣選項(使用者可修改或確認)。<br>c. 若 weather_tags 表為空  系統使用預設天氣列表(晴天、多雲、陰天、雨天、雪天、霧天)。 |
| **輔助說明** | 天氣標籤來源為 weather_tags 資料表,管理員可透過後台新增/編輯天氣選項(weather_name, weather_icon)。可選擇性與第三方氣象 API(如 OpenWeatherMap、中央氣象署 API)連動,自動抓取當日天氣資料。天氣標籤限制為單選(一則日記只能有一個天氣)。 |
| **Screen 畫面** | 日記編輯頁(新增/編輯日記)、天氣選擇器下拉選單 |

---

[ 回到索引](../README.md)
